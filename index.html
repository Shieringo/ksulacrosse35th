<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KSU Lacrosse 35th Anniversary</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, set, get, onValue, update, remove } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBEGmWI7KtSh6CiHHzbwNzDpZMsmnoFGbc",
  authDomain: "ksulacrosse35th.firebaseapp.com",
  databaseURL: "https://ksulacrosse35th-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "ksulacrosse35th",
  storageBucket: "ksulacrosse35th.firebasestorage.app",
  messagingSenderId: "763131291152",
  appId: "1:763131291152:web:dde6f4b1b09c95998b8c95"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

window._fbSet    = (path, val)         => set(ref(db, path), val);
window._fbGet    = (path)              => get(ref(db, path)).then(s => s.val());
window._fbUpdate = (path, val)         => update(ref(db, path), val);
window._fbRemove = (path)              => remove(ref(db, path));
window._fbListen = (path, cb)          => onValue(ref(db, path), s => cb(s.val()));

window._firebaseReady = true;
document.dispatchEvent(new Event('firebaseReady'));
</script>

<style>
:root {
  --navy:    #0f3580;
  --navy-d:  #0a2560;
  --navy-l:  #1a4aaa;
  --navy-xs: #e8eef8;
  --navy-2:  #c8d5ee;
  --gold:    #c9a84c;
  --white:   #ffffff;
  --off:     #f7f8fc;
  --text:    #0f3580;
  --text-sub:#4a5f8a;
  --border:  #c2cfe8;
  --radius:  12px;
  --shadow:  0 2px 16px rgba(15,53,128,0.10);
  --shadow-md: 0 4px 32px rgba(15,53,128,0.15);
  --font-serif: 'Meiryo', 'メイリオ', 'Hiragino Kaku Gothic Pro', sans-serif;
  --font-sans: 'Meiryo', 'メイリオ', 'Hiragino Kaku Gothic Pro', sans-serif;
}

* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  background: var(--white);
  color: var(--text);
  font-family: var(--font-sans);
}

.page { display: none; min-height: 100vh; flex-direction: column; }
.page.active { display: flex; }

/* ヘッダー修正：中央にタイトル、右にロゴ */
.site-header {
  background: var(--white);
  border-bottom: 2px solid var(--navy);
  padding: 0 32px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: center; /* 中央揃え */
  position: relative;
  position: sticky; top: 0; z-index: 50;
  box-shadow: var(--shadow);
}
.header-title {
  font-family: var(--font-serif);
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--navy);
}
.header-logo {
  position: absolute;
  right: 32px;
}
.header-logo img {
  height: 44px;
  width: auto;
}

.main-content {
  flex: 1;
  padding: 32px 24px;
  max-width: 980px;
  margin: 0 auto;
  width: 100%;
}

.page-footer {
  border-top: 2px solid var(--navy);
  padding: 24px;
  display: flex;
  flex-direction: column;
  align-items: center;
  background: var(--white);
}
.footer-logo { height: 128px; width: auto; }

/* 回答画面用スタイル */
#page-answer { background: var(--off); }
.answer-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 40px 20px;
}
.question-card {
  background: var(--white);
  border: 2px solid var(--navy);
  border-radius: var(--radius);
  padding: 32px;
  max-width: 580px;
  width: 100%;
  box-shadow: var(--shadow-md);
}
.question-text {
  font-family: var(--font-serif);
  font-size: 1.4rem;
  font-weight: 700;
  color: var(--navy);
  margin-bottom: 28px;
}
.opt-btn {
  width: 100%;
  background: var(--white);
  border: 2px solid var(--border);
  border-radius: 8px;
  padding: 15px 20px;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 14px;
  cursor: pointer;
}

/* 管理画面用スタイル */
.admin-grid { display: grid; grid-template-columns: 1fr 320px; gap: 24px; }
.tabs { display: flex; border-bottom: 2px solid var(--border); margin-bottom: 28px; }
.tab { padding: 12px 24px; cursor: pointer; }
.tab.active { color: var(--navy); border-bottom: 3px solid var(--navy); }
.tab-content { display: none; }
.tab-content.active { display: block; }
</style>
</head>
<body>

<script>
// ロゴデータの定義（プレースホルダ）
const LOGO_B64 = '...'; 
</script>

<div id="page-answer" class="page active">
  <header class="site-header">
    <div class="header-title">KSU Lacrosse 35th Anniversary</div>
    <div class="header-logo"><img src="data:image/png;base64,..." alt="Logo"></div>
  </header>

  <main class="answer-main">
    <div id="answer-area" class="question-card">
      <div class="question-text" id="q-text">質問を読み込んでいます...</div>
      <div id="options-list"></div>
    </div>
  </main>

  <footer class="page-footer">
    <img class="footer-logo" src="data:image/png;base64,..." alt="Logo">
  </footer>
</div>

<div id="page-admin" class="page">
  <header class="site-header">
    <div class="header-title">KSU Lacrosse 35th Anniversary</div>
    <div class="header-logo"><img src="data:image/png;base64,..." alt="Logo"></div>
  </header>

  <main class="main-content">
    <div class="admin-grid">
      <div class="admin-left">
        <div class="tabs">
          <div class="tab active" onclick="switchTab('tab-q')">設問管理</div>
          <div class="tab" onclick="switchTab('tab-r')">集計結果</div>
        </div>
        </div>
    </div>
  </main>

  <footer class="page-footer">
    <img class="footer-logo" src="data:image/png;base64,..." alt="Logo">
  </footer>
</div>

</body>
</html>
